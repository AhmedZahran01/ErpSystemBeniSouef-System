<Page x:Class="ErpSystemBeniSouef.Views.Pages.SundriesRegion.SundriesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:userControls="clr-namespace:ErpSystemBeniSouef.Views.UserControls"
      FlowDirection="RightToLeft"
      Background="#1F2E3A">

    <!-- ================= Resources ================= -->
    <Page.Resources>

        <SolidColorBrush x:Key="CardBrush" Color="#2B3A4A"/>
        <SolidColorBrush x:Key="PrimaryButtonBrush" Color="#0E6C8E"/>
        <SolidColorBrush x:Key="DangerButtonBrush" Color="#A93226"/>

        <!-- Label -->
        <Style x:Key="FieldLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,10,0,4"/>
        </Style>

        <!-- TextBox -->
        <Style x:Key="InputTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="34"/>
            <Setter Property="Width" Value="260"/>
            <Setter Property="Background" Value="#1E3040"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#304151"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <!-- Button -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="36"/>
            <Setter Property="Width" Value="120"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Page.Resources>

    <!-- ================= Layout ================= -->
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <userControls:TitleBar FlowDirection="LeftToRight" Grid.Row="0"/>

        <!-- ================= Form Card ================= -->
        <Border Grid.Row="1"
                Width="420"
                Background="{StaticResource CardBrush}"
                CornerRadius="10"
                Padding="20"
                Margin="0,10,0,15">

            <StackPanel>

                <TextBlock Text="تاريخ النثرية" Style="{StaticResource FieldLabelStyle}"/>
                <DatePicker x:Name="SundriesDate" Height="34"/>

                <TextBlock Text="سبب النثرية" Style="{StaticResource FieldLabelStyle}"/>
                <TextBox x:Name="SundriesReason"
                         Style="{StaticResource InputTextBoxStyle}"/>

                <TextBlock Text="المبلغ" Style="{StaticResource FieldLabelStyle}"/>
                <TextBox x:Name="SundriesTotal"
                         Style="{StaticResource InputTextBoxStyle}"
                         PreviewTextInput="DecimalOnly_PreviewTextInput"/>

                <TextBlock x:Name="SundriesTotalError"
                           Text="من فضلك ادخل مبلغ صحيح"
                           Foreground="Red"
                           FontSize="12"
                           Visibility="Collapsed"/>

                <!-- Buttons -->
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Margin="0,20,0,0">

                    <Button Content="إضافة"
                            Background="{StaticResource PrimaryButtonBrush}"
                            Style="{StaticResource ActionButtonStyle}"
                            Click="AddSundriesBtn_Click" Name="AddButton"/>

                    <Button Content="حذف"
                            Background="{StaticResource DangerButtonBrush}"
                            Style="{StaticResource ActionButtonStyle}"
                            Margin="10,0,0,0"
                            Click="DeleteSundriesBtn_Click"/>
                </StackPanel>

            </StackPanel>
        </Border>

        <!-- ================= Grid ================= -->
        <Border Grid.Row="2"
                Background="{StaticResource CardBrush}"
                CornerRadius="10"
                Padding="10">

            <DataGrid x:Name="pettyCashGrid"
                      AutoGenerateColumns="False"
                      RowHeight="32"
                      FontSize="14"
                      SelectionMode="Single"
                      Background="#1E3040"
                      GridLinesVisibility="All">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="م"
                                        Binding="{Binding DisplayUIId}" Width="*"/>
                    <DataGridTextColumn Header="التاريخ"
                                        Binding="{Binding Date,StringFormat=yyyy-MM-dd}" Width="*"/>
                    <DataGridTextColumn Header="السبب"
                                        Binding="{Binding Reason}" Width="2*"/>
                    <DataGridTextColumn Header="المبلغ"
                                        Binding="{Binding Amount,StringFormat=N2}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

        </Border>

        <!-- ================= Footer ================= -->
        <!--<Button Grid.Row="3"
                Content="رجوع"
                Width="120"
                Height="36" 
                HorizontalAlignment="Left"
                Background="#555"
                Foreground="White"
                Style="{StaticResource ActionButtonStyle}"
                Click="DahbordBackButton_Click"/>-->

        <Button Grid.Row="4" HorizontalAlignment="Right"  Content="↩" FontSize="35" 
               Width="110" Height="50" Foreground="White"
               Style="{StaticResource triggerrr}" Margin="1,5,30,1"  
               Click="DahbordBackButton_Click"/>

    </Grid>
</Page>
